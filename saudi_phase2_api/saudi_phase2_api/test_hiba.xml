{%- macro format_float(value, precision=2) -%}
{%- if frappe.utils.cint(precision) == 2 %}
{{ "%.3f" % value|abs }}
{%- elif frappe.utils.cint(precision) == 2 -%}
{{ "%.4f" % value|abs }}
{%- else -%}
{{ "%.2f" % value|abs }}
{%- endif %}
{%- endmacro -%}
<Invoice xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2" xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2" xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2" xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"><ext:UBLExtensions>
<ext:UBLExtension>
<ext:ExtensionURI>urn:oasis:names:specification:ubl:dsig:enveloped:xades</ext:ExtensionURI>
<ext:ExtensionContent>
<sig:UBLDocumentSignatures xmlns:sig="urn:oasis:names:specification:ubl:schema:xsd:CommonSignatureComponents-2" xmlns:sac="urn:oasis:names:specification:ubl:schema:xsd:SignatureAggregateComponents-2" xmlns:sbc="urn:oasis:names:specification:ubl:schema:xsd:SignatureBasicComponents-2">
<sac:SignatureInformation>
<cbc:ID>urn:oasis:names:specification:ubl:signature:1</cbc:ID>
<sbc:ReferencedSignatureID>urn:oasis:names:specification:ubl:signature:Invoice</sbc:ReferencedSignatureID>
</sac:SignatureInformation>
</sig:UBLDocumentSignatures>
</ext:ExtensionContent>
</ext:UBLExtension>
</ext:UBLExtensions>
<cbc:UBLVersionID>2.1</cbc:UBLVersionID>
<cbc:ProfileID>reporting:1.0</cbc:ProfileID>
<cbc:ID>TOSL108</cbc:ID>
<cbc:UUID>16e78469-64af-406d-9cfd-895e724198f0</cbc:UUID>
<cbc:IssueDate>2023-03-31</cbc:IssueDate>
<cbc:InvoiceTypeCode listID="UN/ECE 1001 Subset" listAgencyID="6" name="0100000">388</cbc:InvoiceTypeCode>
<cbc:Note languageID="en">Ordered in our booth at the convention.</cbc:Note>
<cbc:TaxPointDate>2023-03-31</cbc:TaxPointDate>
<cbc:DocumentCurrencyCode listID="ISO 4217 Alpha" listAgencyID="6">SAR</cbc:DocumentCurrencyCode>
<cbc:TaxCurrencyCode>SAR</cbc:TaxCurrencyCode>
<cbc:AccountingCost>Project cost code 123</cbc:AccountingCost>
<cac:InvoicePeriod>
<cbc:StartDate>2023-03-31</cbc:StartDate>
<cbc:EndDate>2023-03-31</cbc:EndDate>
</cac:InvoicePeriod>
<cac:OrderReference>
<cbc:ID>123</cbc:ID>
</cac:OrderReference>
<cac:ContractDocumentReference>
<cbc:ID>Contract321</cbc:ID>
<cbc:DocumentType>Framework agreement</cbc:DocumentType>
</cac:ContractDocumentReference>
<cac:AdditionalDocumentReference>
<cbc:ID>ICV</cbc:ID>
<cbc:UUID>16e78469-64af-406d-9cfd-895e724198f0</cbc:UUID>
</cac:AdditionalDocumentReference>
<cac:AdditionalDocumentReference>
<cbc:ID>PIH</cbc:ID>
<cac:Attachment>
<cbc:EmbeddedDocumentBinaryObject mimeCode="text/plain">fHwxfDF8QUJDIENvbXBhbnl8MzEwODY0MjA3MjAwMDAzfElOVi0yMDIyMDAwMXwyMDIzLTAzLTMxfDIyOjU2OjI2fDEwMDAuMDB8U0FSfFhZWiBDb3Jwb3JhdGlvbnwzMTA4NjQyMDcyMDAwMDM=</cbc:EmbeddedDocumentBinaryObject>
</cac:Attachment>
</cac:AdditionalDocumentReference>
<cac:AdditionalDocumentReference>
<cbc:ID>QR</cbc:ID>
<cac:Attachment>
<cbc:EmbeddedDocumentBinaryObject mimeCode="text/plain">ARNBY21lIFdpZGdldOKAmXMgTFREAg8zMTExMTExMTExMDExMTMDFDIwMjItMDgtMTdUMTc6NDE6MDhaBAYyMzEuMTUFBTMwLjE1BixSdkNTcE1ZejgwMDlLYkoza3U3Mm9hQ0ZXcHpFZlFOY3BjKzVidWxoM0prPQdgTUVZQ0lRRFlzRG52aUpZUGdZanlDSVlBeXpFVGVZdGhJb0phUWhDaGJsUDRlQUFQUEFJaEFKbDZ6ZkhnaUttV1R0c2ZVejhZQlo4UWtROXJCTDRVeTdtSzBjeHZXb29ICFgwVjAQBgcqhkjOPQIBBgUrgQQACgNCAARhgwyg5oVgCEw7+y16i19nJq+vqnXVJKXCwr1rOawtjtvVv4UuGowCuEHZ2ocpujGoo1++QoN4+GmqO6LmFyfRCUYwRAIgOgjNPJW017lsIijmVQVkP7GzFO2KQKd9GHaukLgIWFsCIFJF9uwKhTMxDjWbN+1awsnFI7RLBRxA/6hZ+F1wtaqU</cbc:EmbeddedDocumentBinaryObject>
</cac:Attachment>
</cac:AdditionalDocumentReference>
<cac:AccountingSupplierParty>
<cac:Party>
<cac:PartyIdentification>
<cbc:ID schemeID="CRN">Supp123</cbc:ID>
</cac:PartyIdentification>
<cac:PostalAddress>
<cbc:StreetName>Mystreetname</cbc:StreetName>

<cbc:BuildingNumber>Mybuildingnumber</cbc:BuildingNumber>
<cbc:PlotIdentification>Myplotnumber</cbc:PlotIdentification>
<cbc:CitySubdivisionName>Alfalah</cbc:CitySubdivisionName>
<cbc:CityName>MyCity</cbc:CityName>
<cbc:PostalZone>MyPIN</cbc:PostalZone>
<cbc:CountrySubentityCode>Mystate</cbc:CountrySubentityCode>
<cac:Country>
<cbc:IdentificationCode listID="ISO3166-1" listAgencyID="6">SA</cbc:IdentificationCode>
</cac:Country>
</cac:PostalAddress>
 
<cac:PartyTaxScheme>
<cbc:CompanyID schemeID="DKVAT" schemeAgencyID="ZZZ">766666666666666</cbc:CompanyID>
<cac:TaxScheme>
<cbc:ID schemeID="UN/ECE 5153" schemeAgencyID="6">VAT</cbc:ID>
</cac:TaxScheme>
</cac:PartyTaxScheme>
<cac:PartyLegalEntity>
<cbc:RegistrationName>MyCompany</cbc:RegistrationName>
<cbc:CompanyID schemeID="CVR" schemeAgencyID="ZZZ">MytaxID</cbc:CompanyID>
<cac:RegistrationAddress>
<cbc:CityName>MyCITY</cbc:CityName>
<cbc:CountrySubentity>Mystate</cbc:CountrySubentity>
<cac:Country>
<cbc:IdentificationCode>SA</cbc:IdentificationCode>
</cac:Country>
</cac:RegistrationAddress>
</cac:PartyLegalEntity>
<cac:Contact>
<cbc:Telephone>MyPhone</cbc:Telephone>
<cbc:Telefax>MyFax</cbc:Telefax>
<cbc:ElectronicMail>MyEmail</cbc:ElectronicMail>
</cac:Contact>
<cac:Person>
<cbc:FirstName>MyCompany</cbc:FirstName>
<cbc:FamilyName></cbc:FamilyName>
<cbc:MiddleName></cbc:MiddleName>
<cbc:JobTitle>Sales manager</cbc:JobTitle>
</cac:Person>
</cac:Party>
</cac:AccountingSupplierParty>
<cac:AccountingCustomerParty>
<cac:Party>
<cac:PartyIdentification>
<cbc:ID schemeID="CRN">MyTaxID</cbc:ID>
</cac:PartyIdentification>

<cac:PostalAddress>
<cbc:StreetName>MyStreet</cbc:StreetName>

<cbc:BuildingNumber>MyBuilding</cbc:BuildingNumber>
<cbc:PlotIdentification>MyPlot</cbc:PlotIdentification>
<cbc:CitySubdivisionName>MyStreet</cbc:CitySubdivisionName>
<cbc:CityName>MyCity</cbc:CityName>
<cbc:PostalZone>Mypincode</cbc:PostalZone>
<cbc:CountrySubentityCode>Mystate</cbc:CountrySubentityCode>
<cac:Country>
<cbc:IdentificationCode listID="ISO3166-1" listAgencyID="6">SA</cbc:IdentificationCode>
</cac:Country>
</cac:PostalAddress>
 
<cac:PartyTaxScheme>
<cbc:CompanyID schemeID="BEVAT" schemeAgencyID="ZZZ">MyStateid</cbc:CompanyID>
<cac:TaxScheme>
<cbc:ID schemeID="UN/ECE 5153" schemeAgencyID="6">VAT</cbc:ID>
</cac:TaxScheme>
</cac:PartyTaxScheme>
<cac:PartyLegalEntity>
<cbc:RegistrationName>MyCustomer</cbc:RegistrationName>
<cbc:CompanyID schemeAgencyID="ZZZ" schemeID="ZZZ">MytaxID</cbc:CompanyID>
<cac:RegistrationAddress>
<cbc:CityName>MyCity</cbc:CityName>
<cbc:CountrySubentity>MyState</cbc:CountrySubentity>
<cac:Country>
<cbc:IdentificationCode>SA</cbc:IdentificationCode>
</cac:Country>
</cac:RegistrationAddress>
</cac:PartyLegalEntity>
</cac:Party>
</cac:AccountingCustomerParty>
<cac:PayeeParty>
<cac:PartyName>
<cbc:Name>MyCompany</cbc:Name>
</cac:PartyName>
<cac:PartyLegalEntity>
<cbc:CompanyID schemeID="UK:CH" schemeAgencyID="ZZZ">MyTaxID</cbc:CompanyID>
</cac:PartyLegalEntity>
</cac:PayeeParty>
<cac:Delivery>
<cbc:ActualDeliveryDate>2023-03-31</cbc:ActualDeliveryDate>
<cac:DeliveryLocation>
<cbc:ID schemeID="GLN" schemeAgencyID="9">6754238987648</cbc:ID>
{% if doc.shipping_address_data %}
<cac:Address>
<cbc:StreetName>{{ doc.shipping_address_data.street }}</cbc:StreetName>
<cbc:AdditionalStreetName>Side door</cbc:AdditionalStreetName>
<cbc:BuildingNumber>{{ doc.shipping_address_data.building_no }}</cbc:BuildingNumber>
<cbc:CityName>{{ doc.shipping_address_data.city }}</cbc:CityName>
<cbc:PostalZone>{{ doc.shipping_address_data.pincode }}</cbc:PostalZone>
<cbc:CountrySubentity>{{ doc.shipping_address_data.state }}</cbc:CountrySubentity>
<cac:Country>
<cbc:IdentificationCode>SA</cbc:IdentificationCode>
</cac:Country>
</cac:Address>
{% endif %}
</cac:DeliveryLocation>
</cac:Delivery>
<cac:PaymentMeans>
<cbc:PaymentMeansCode listID="UN/ECE 4461">31</cbc:PaymentMeansCode>
</cac:PaymentMeans>
<cac:PaymentTerms>
<cbc:Note>Penalty percentage 10% from due date</cbc:Note>
</cac:PaymentTerms>
<cac:TaxTotal>

<cbc:TaxAmount currencyID="SAR">150.00</cbc:TaxAmount>

<cac:TaxSubtotal>
<cbc:TaxableAmount currencyID="SAR">201.00</cbc:TaxableAmount>
<cbc:TaxAmount currencyID="SAR">30.15</cbc:TaxAmount>
<cac:TaxCategory>
<cbc:ID>S</cbc:ID>
<cbc:Percent>15</cbc:Percent>
<cac:TaxScheme>
<cbc:ID>VAT</cbc:ID>
</cac:TaxScheme>
</cac:TaxCategory>
</cac:TaxSubtotal>

</cac:TaxTotal>

<cac:TaxTotal>
<cbc:TaxAmount currencyID="SAR">150.00</cbc:TaxAmount>
</cac:TaxTotal>

<cac:LegalMonetaryTotal>
<cbc:LineExtensionAmount currencyID="SAR">201.00</cbc:LineExtensionAmount>
<cbc:TaxExclusiveAmount currencyID="SAR">201.00</cbc:TaxExclusiveAmount>
<cbc:TaxInclusiveAmount currencyID="SAR">231.15</cbc:TaxInclusiveAmount>
<cbc:AllowanceTotalAmount currencyID="SAR">0.00</cbc:AllowanceTotalAmount>
<cbc:PayableAmount currencyID="SAR">1000.00</cbc:PayableAmount>
</cac:LegalMonetaryTotal>

<cac:InvoiceLine>
<cbc:ID>1</cbc:ID>
<cbc:Note>Scratch on box</cbc:Note>
<cbc:InvoicedQuantity unitCode="PCE">33.000000</cbc:InvoicedQuantity>
<cbc:LineExtensionAmount currencyID="SAR">99.00</cbc:LineExtensionAmount>

<cac:TaxTotal>
<cbc:TaxAmount currencyID="SAR">14.85</cbc:TaxAmount>
<cbc:RoundingAmount currencyID="SAR">113.85</cbc:RoundingAmount>
</cac:TaxTotal>

<cac:Item>
<cbc:Description languageID="EN">MyItemname</cbc:Description>
<cbc:Name>MyItemcode</cbc:Name>
<cac:SellersItemIdentification>
<cbc:ID>JB007</cbc:ID>
</cac:SellersItemIdentification>
<cac:StandardItemIdentification>
<cbc:ID schemeID="GTIN" schemeAgencyID="9">1</cbc:ID>
</cac:StandardItemIdentification>

<ClassifiedTaxCategory xmlns="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2">
<cbc:ID schemeID="UN/ECE 5305" schemeAgencyID="6">S</cbc:ID>
<cbc:Percent>15</cbc:Percent>
<TaxScheme>
<cbc:ID schemeID="UN/ECE 5153" schemeAgencyID="6">VAT</cbc:ID>
</TaxScheme>
</ClassifiedTaxCategory>

</cac:Item>

<cac:Price>
<cbc:PriceAmount currencyID="SAR">3.00</cbc:PriceAmount>
</cac:Price>

</cac:InvoiceLine>

</Invoice>